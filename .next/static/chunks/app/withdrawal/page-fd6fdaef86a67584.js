(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{1122:function(e,a,t){Promise.resolve().then(t.bind(t,8081))},8081:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return c}});var s=t(7437),r=t(2265),n=()=>(0,s.jsx)("div",{className:"loader",children:(0,s.jsxs)("figure",{children:[(0,s.jsx)("div",{className:"dot white"}),(0,s.jsx)("div",{className:"dot"}),(0,s.jsx)("div",{className:"dot"}),(0,s.jsx)("div",{className:"dot"}),(0,s.jsx)("div",{className:"dot"})]})}),o=t(251),l=t(8506),c=()=>{let{t:e}=(0,o.$G)(),[a,t]=(0,r.useState)(""),[c,i]=(0,r.useState)(!1),[d,u]=(0,r.useState)({login:"",balance:0}),[h,p]=(0,r.useState)(null),[m,w]=(0,r.useState)(null),[x,y]=(0,r.useState)(null),[j,f]=(0,r.useState)(!1),[v,N]=(0,r.useState)(!1),[S,g]=(0,r.useState)(null),[b,k]=(0,r.useState)(!1),[E,C]=(0,r.useState)(""),F="https://pickbonus.myawardwallet.com/api",_="MG5SRC6-HFBMACK-MMSR9QW-1EST6QC";(0,r.useEffect)(()=>{let e=async()=>{try{let e=new Headers;e.append("x-api-key",_);let a=await fetch("https://api.nowpayments.io/v1/merchant/coins",{method:"GET",headers:e,redirect:"follow"});if(a.ok){let e=await a.json();p(e)}else console.error("Failed to fetch coins data:",a.status)}catch(e){console.error("An error occurred while fetching coins data:",e)}};(async()=>{try{let e=new URLSearchParams(window.location.search).get("keyword"),a=await fetch("".concat(F,"/user/read_one.php?id=").concat(e));if(a.ok){let e=await a.json();u(e)}else console.error("Failed to fetch user data:",a.status)}catch(e){console.error("An error occurred while fetching user data:",e)}})(),e()},[F]);let M=async()=>{try{let e=new Headers;e.append("x-api-key",_),e.append("Content-Type","application/json");let t={method:"POST",headers:e,body:JSON.stringify({address:a,currency:q}),redirect:"follow"},s=await fetch("https://api.nowpayments.io/v1/payout/validate-address",t);if(s.ok)N(!1),R();else{console.error("Failed to validate address:",s.status);let e=await s.text();console.log("Response text:",e),N(!0)}}catch(e){console.error("An error occurred during address validation:",e),N(!0)}},R=async()=>{try{i(!0);let e=await T();console.log("JWT",e);let t=new Headers;if(t.append("x-api-key","MG5SRC6-HFBMACK-MMSR9QW-1EST6QC"),t.append("Content-Type","application/json"),t.append("Authorization","Bearer ".concat(e)),Array.isArray(G)&&G.length>0){let e={ipn_callback_url:"https://nowpayments.io",withdrawals:[{address:a,currency:q,amount:parseFloat(G[0].estimated_amount),ipn_callback_url:"https://nowpayments.io",userData:d,userWithdraw:W}]};console.log("type",d);let s={method:"POST",headers:t,body:JSON.stringify({...e}),redirect:"follow"},r=await fetch("https://pickbonus.myawardwallet.com/api/payment/payment.php",s);if(r.ok)await r.text(),K(!J),U(!I);else if(400===r.status){let e=await r.json();console.error("Failed to make payout request:",e.error),C(e.error)}else 500===r.status?(console.error("Failed to make payout request:","Internal Server Error"),f(!0),C("Internal Server Error")):(console.error("Failed to make payout request:",r.status),f(!0),C("Error: ".concat(r.status)))}}catch(e){console.error("Error during payout request:",e),f(!0),C("Insufficient balance for withdrawal")}finally{i(!1)}},T=async()=>{try{let e=new Headers;e.append("Content-Type","application/json");let a=JSON.stringify({email:"and@karmabs.com",password:"Ytvn3daw!"}),t=await fetch("https://api.nowpayments.io/v1/auth",{method:"POST",headers:e,body:a,redirect:"follow"});if(t.ok)return(await t.json()).token;console.error("Failed to authenticate user:",t.status)}catch(e){console.error("Error during user authentication:",e)}},[W,A]=(0,r.useState)(""),[q,O]=(0,r.useState)("USDTTRC20"),[H,P]=(0,r.useState)(),D=e=>{e&&e.value&&(O(e.value),N(!1))};(0,r.useEffect)(()=>{B(W)},[q,W]);let[G,Q]=(0,r.useState)(null),B=async e=>{try{let e="https://pickbonus.myawardwallet.com/api/payment/estimated.php?amount=".concat(W,"&currency_from=").concat("usd","&currency_to=").concat(q),a=await fetch(e);if(a.ok){let e=await a.json();console.log(e),Q(e)}else console.error("Request failed with status ".concat(a.status))}catch(e){console.error("An error occurred during the request:",e)}};(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("https://pickbonus.myawardwallet.com/api/payment/minamount.php?currency=".concat(q));if(!e.ok)throw Error("Network response was not ok");let a=await e.json();P(a),console.log("======",a)}catch(e){console.error("Error:",e)}})()},[q]),(0,r.useEffect)(()=>{(async()=>{try{if(void 0!==W){let e=new Headers;e.append("x-api-key","MG5SRC6-HFBMACK-MMSR9QW-1EST6QC");let a=await fetch("https://api.nowpayments.io/v1/payout/fee?currency=".concat(q,"&amount=").concat(W),{method:"GET",headers:e,redirect:"follow"});if(!a.ok)throw Error("Network response was not ok");let t=await a.json();console.log("FEEEE",t),g(t)}}catch(e){console.error("Error:",e)}})()},[q,W]);let[I,U]=(0,r.useState)(!1),[J,K]=(0,r.useState)(!1),[L,Y]=(0,r.useState)(!0),$=async()=>{B(W),U(!I)},[z,Z]=(0,r.useState)(""),V=a=>{let t=parseFloat(a.target.value.trim());A(a.target.value),isNaN(t)||t<4?(Y(!0),Z(e("Withdrawal rejected: Minimum withdrawal amount is 4 USD."))):t>d.balance?(Y(!0),Z(e("Not enough funds in the account."))):(Y(!1),Z(""))};return console.log("COINS",h),(0,s.jsxs)("div",{className:"withdrawal",children:[(0,s.jsx)("div",{className:"top-block",children:(0,s.jsx)("h2",{children:e("Withdrawal")})}),(0,s.jsx)("div",{className:"ui-methods",children:(0,s.jsxs)("div",{className:"container flex",children:[(0,s.jsx)("div",{className:"menu",children:(0,s.jsx)("div",{className:"menu-item active",children:e("Withdrawal Request")})}),(0,s.jsx)("div",{className:"menu-info",children:(0,s.jsxs)("div",{className:"flex menu-content",children:[(0,s.jsx)("h4",{children:e("Withdrawal Requests")}),(0,s.jsxs)("div",{className:"all-balance",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:d.login})," ",e("your current balance is:")]}),Object.keys(d).length>0&&(0,s.jsx)("div",{className:"balance",children:(0,s.jsxs)("span",{children:[d.balance," USD"]})})]}),(0,s.jsxs)("div",{className:"withdrawal-form",children:[(0,s.jsxs)("div",{className:"column",children:[(0,s.jsx)("label",{htmlFor:"method",children:e("Select Payment Method")}),h&&(0,s.jsx)(l.ZP,{options:h.selectedCurrencies.map(e=>({value:e,label:(0,s.jsxs)("div",{className:"option-select",children:[(0,s.jsx)("img",{src:"./".concat(e,".png"),alt:"".concat(e),style:{width:"24px",marginRight:"8px"}}),e]})})),value:{value:q,label:(0,s.jsxs)("div",{className:"option-select",children:[(0,s.jsx)("img",{src:"./".concat(q,".png"),alt:q,style:{width:"24px",marginRight:"8px"}}),q]})},onChange:e=>D(e),isSearchable:!1,styles:{control:e=>({...e,borderRadius:"7px",maxHeight:"36px",minWidth:"226px"})}})]}),q&&(0,s.jsxs)("div",{className:"column",children:[(0,s.jsxs)("label",{htmlFor:"amount",children:[e("Amount")," USD"]}),(0,s.jsx)("input",{type:"number",name:"amount",id:"amount",placeholder:"0",required:!0,value:W,onChange:e=>{V(e)},className:L?"error":""}),L&&(0,s.jsx)("span",{className:"mesSpan error-span",children:z})]}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:$,disabled:L,children:e("Payout")}),I&&(0,s.jsx)("div",{className:"overflow",children:(0,s.jsxs)("div",{className:"modal",children:[c&&(0,s.jsx)(n,{}),(0,s.jsxs)("div",{className:"close",onClick:()=>U(!I),children:[" ",(0,s.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M8.44487 24L24 8.02771M8 8L23.5551 23.9723",stroke:"#15143D",strokeWidth:"2.8",strokeLinecap:"round"})})]}),(0,s.jsx)("div",{className:"column",children:(0,s.jsx)("p",{children:S&&"string"!=typeof S?(0,s.jsxs)(s.Fragment,{children:[e("Withdrawal commission:")," ",S.fee.toFixed(6).replace(/\.?0+$/,"")," ",G.currency_to,". ",(0,s.jsx)("br",{}),e("You will receive")," ",(G.estimated_amount-S.fee).toFixed(6).replace(/\.?0+$/,"")," ",G.currency_to," ",e("in your wallet."),(0,s.jsx)("br",{}),e("Enter your wallet details and click ‘Withdraw Funds’")]}):e("Error: Invalid fee data")})}),(0,s.jsxs)("div",{className:"column",children:[(0,s.jsxs)("label",{htmlFor:"wallet",children:[e("Wallet Address")," ",q]}),(0,s.jsx)("input",{type:"text",name:"wallet",id:"wallet",placeholder:"Enter wallet address",required:!0,className:"column-input ".concat(v?"error":""),onChange:e=>t(e.target.value)}),v&&(0,s.jsx)("span",{className:"error-span",children:e("Your address is not valid")})]}),(0,s.jsx)("button",{className:"btn btn-primary btn-modal",onClick:M,children:e("Send Request")})]})}),J&&(0,s.jsx)("div",{className:"overflow",children:(0,s.jsxs)("div",{className:"modal modal-success",children:[c&&(0,s.jsx)(n,{}),(0,s.jsx)("h3",{children:L}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>K(!J),children:"OK"})]})})]})]})})]})})]})}}},function(e){e.O(0,[304,506,971,849,744],function(){return e(e.s=1122)}),_N_E=e.O()}]);